<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÁµêÂ∏≥ | Momento</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="/css/momento-theme.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/checkout.css">
</head>

<body class="bg-black text-white">
    <!-- Navbar (Simplified) -->
    <nav class="navbar navbar-dark bg-dark border-bottom border-secondary">
        <div class="container">
            <a class="navbar-brand fw-bold" href="/">
                <i class="fas fa-ticket-alt me-2 text-success"></i>Momento
            </a>
            <a href="cart" class="btn btn-outline-secondary btn-sm">
                <i class="fas fa-arrow-left me-2"></i>ËøîÂõûË≥ºÁâ©Ëªä
            </a>
        </div>
    </nav>

    <div class="container py-5">
        <!-- Stepper -->
        <div class="checkout-stepper">
            <div class="step-item active" data-step="1">
                <div class="step-number">1</div>
                <span class="step-label d-none d-md-inline">Á¢∫Ë™çË®ÇÂñÆ</span>
            </div>
            <div class="step-item" data-step="2">
                <div class="step-number">2</div>
                <span class="step-label d-none d-md-inline">Êî∂‰ª∂Ë≥áË®ä</span>
            </div>
            <div class="step-item" data-step="3">
                <div class="step-number">3</div>
                <span class="step-label d-none d-md-inline">‰ªòÊ¨æÊñπÂºè</span>
            </div>
            <div class="step-item" data-step="4">
                <div class="step-number">4</div>
                <span class="step-label d-none d-md-inline">ÂÆåÊàê</span>
            </div>
        </div>

        <div class="row">
            <!-- Main Content -->
            <div class="col-lg-8">
                <!-- Step 1: Review Order -->
                <div class="step-content active" id="step1">
                    <!--<div class="card bg-dark border-secondary mb-4">
                        <div class="card-header bg-transparent border-secondary">
                            <h5 class="mb-0"><i class="fas fa-ticket-alt me-2 text-primary"></i>Á•®Âà∏È†ÖÁõÆ</h5>
                        </div>
                        <div class="card-body p-0">
                            <div class="order-item">
                                <img loading="lazy" src="https://picsum.photos/seed/event1/200" class="order-item-img" alt="Event">
                                <div class="flex-grow-1">
                                    <h6 class="mb-1">2025Êñ∞Âπ¥Èü≥Ê®ÇÊúÉÔΩúÁ∂≠‰πüÁ¥ç‰πãÂ§ú</h6>
                                    <p class="text-muted small mb-1">VIP ÁâπÂçÄ</p>
                                    <p class="text-muted small mb-0">
                                        <i class="far fa-calendar me-1"></i>2024/12/31 (‰∫å) 19:30
                                    </p>
                                </div>
                                <div class="text-end">
                                    <div class="text-success fw-bold">NT$ 2,800</div>
                                    <small class="text-muted">x 1</small>
                                </div>
                            </div>
                        </div>
                    </div>-->

                    <div class="card bg-dark border-secondary mb-4">
                        <div class="card-header bg-transparent border-secondary">
                            <h5 class="mb-0"><i class="fas fa-box me-2 text-warning"></i>ÂïÜÂìÅÈ†ÖÁõÆ</h5>
                        </div>
                        <div class="card-body p-0">
                            <div class="order-item">
                                <img loading="lazy" src="https://picsum.photos/seed/prod1/200" class="order-item-img" alt="Product">
                                <div class="flex-grow-1">
                                    <h6 class="mb-1">Á∂ìÂÖ∏LogoÂ∏ÜÂ∏ÉË¢ã</h6>
                                </div>
                                <div class="text-end">
                                    <div class="text-success fw-bold">NT$ 450</div>
                                    <small class="text-muted">x 1</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="d-flex justify-content-between">
                        <!--<a href="cart.html" class="btn btn-outline-secondary">
                            <i class="fas fa-arrow-left me-2"></i>‰øÆÊîπË≥ºÁâ©Ëªä
                        </a>-->
                        <button class="btn btn-primary btn-next" data-next="2">
                            ‰∏ã‰∏ÄÊ≠•ÔºöÂ°´ÂØ´Ë≥áË®ä<i class="fas fa-arrow-right ms-2"></i>
                        </button>
                    </div>
                </div>

                <!-- Step 2: Shipping Info -->
                <div class="step-content" id="step2">
                    <form id="shippingForm">
                        <!-- Contact Info -->
                        <div class="card bg-dark border-secondary mb-4">
                            <div class="card-header bg-transparent border-secondary">
                                <h5 class="mb-0"><i class="fas fa-user me-2"></i>ËÅØÁµ°Ë≥áË®ä</h5>
                            </div>
                            <div class="card-body">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label class="form-label">ÂßìÂêç <span class="text-danger">*</span></label>
                                        <label type="text" class="form-control bg-dark text-white border-secondary" th:text="${session.loginMember.name}">
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">ÊâãÊ©üËôüÁ¢º <span class="text-danger">*</span></label>
                                        <label type="tel" class="form-control bg-dark text-white border-secondary" th:text="${session.loginMember.phone}">
                                    </div>
                                    <div class="col-12">
                                        <label class="form-label">ÈõªÂ≠êÈÉµ‰ª∂ <span class="text-danger">*</span></label>
                                        <label type="email" class="form-control bg-dark text-white border-secondary" th:text="${session.loginMember.account}">
                                        <div class="form-text">Á•®Âà∏Â∞áÂØÑÈÄÅËá≥Ê≠§‰ø°ÁÆ±</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Shipping Address (for merchandise) -->
                        <div class="card bg-dark border-secondary mb-4" id="shippingAddressCard">
                            <div class="card-header bg-transparent border-secondary">
                                <h5 class="mb-0"><i class="fas fa-truck me-2"></i>ÈÖçÈÄÅÂú∞ÂùÄÔºàÂïÜÂìÅÂØÑÈÄÅÔºâ</h5>
                            </div>
                            <div class="card-body">
                                <div class="row g-3">
                                    <!--<div class="col-md-4">
                                        <label class="form-label">ÈÉµÈÅûÂçÄËôü</label>
                                        <input type="text" class="form-control bg-dark text-white border-secondary" placeholder="100">
                                    </div>
                                    <div class="col-md-8">
                                        <label class="form-label">Á∏£Â∏Ç / ÂçÄÂüü</label>
                                        <select class="form-select bg-dark text-white border-secondary">
                                            <option value="">Ë´ãÈÅ∏Êìá</option>
                                            <option value="taipei">Âè∞ÂåóÂ∏Ç</option>
                                            <option value="newtaipei">Êñ∞ÂåóÂ∏Ç</option>
                                            <option value="taoyuan">Ê°ÉÂúíÂ∏Ç</option>
                                            <option value="taichung">Âè∞‰∏≠Â∏Ç</option>
                                            <option value="tainan">Âè∞ÂçóÂ∏Ç</option>
                                            <option value="kaohsiung">È´òÈõÑÂ∏Ç</option>
                                        </select>
                                    </div>-->
                                    <div class="col-12">
                                        <label class="form-label">Ë©≥Á¥∞Âú∞ÂùÄ</label>
                                        <label type="text" class="form-control bg-dark text-white border-secondary" th:text="${session.loginMember.Address}">
                                    </div>
                                    <div class="col-12">
                                        <label class="form-label">ÂÇôË®ªÔºàÈÅ∏Â°´Ôºâ</label>
                                        <textarea class="form-control bg-dark text-white border-secondary" rows="2" placeholder="‰æãÂ¶ÇÔºöË´ãÊîæÁÆ°ÁêÜÂÆ§"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Invoice -->
                        <!--<div class="card bg-dark border-secondary mb-4">
                            <div class="card-header bg-transparent border-secondary">
                                <h5 class="mb-0"><i class="fas fa-file-invoice me-2"></i>ÁôºÁ•®Ë≥áË®ä</h5>
                            </div>
                            <div class="card-body">
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="radio" name="invoiceType" id="invoicePersonal" checked>
                                    <label class="form-check-label" for="invoicePersonal">ÂÄã‰∫∫ÈõªÂ≠êÁôºÁ•®</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="radio" name="invoiceType" id="invoiceCarrier">
                                    <label class="form-check-label" for="invoiceCarrier">ÊâãÊ©üËºâÂÖ∑</label>
                                </div>
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="radio" name="invoiceType" id="invoiceCompany">
                                    <label class="form-check-label" for="invoiceCompany">ÂÖ¨Âè∏ÁôºÁ•®</label>
                                </div>
                                <div id="carrierInput" class="d-none">
                                    <input type="text" class="form-control bg-dark text-white border-secondary" placeholder="/ABC1234">
                                </div>
                                <div id="companyInput" class="d-none">
                                    <div class="row g-2">
                                        <div class="col-md-6">
                                            <input type="text" class="form-control bg-dark text-white border-secondary" placeholder="ÂÖ¨Âè∏Áµ±Á∑®">
                                        </div>
                                        <div class="col-md-6">
                                            <input type="text" class="form-control bg-dark text-white border-secondary" placeholder="ÂÖ¨Âè∏Êä¨È†≠">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>-->

                        <div class="d-flex justify-content-between">
                            <button type="button" class="btn btn-outline-secondary btn-prev" data-prev="1">
                                <i class="fas fa-arrow-left me-2"></i>‰∏ä‰∏ÄÊ≠•
                            </button>
                            <button type="button" class="btn btn-primary btn-next" data-next="3">
                                ‰∏ã‰∏ÄÊ≠•ÔºöÈÅ∏Êìá‰ªòÊ¨æ<i class="fas fa-arrow-right ms-2"></i>
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Step 3: Payment -->
                <div class="step-content" id="step3">
                    <div class="card bg-dark border-secondary mb-4">
                        <div class="card-header bg-transparent border-secondary">
                            <h5 class="mb-0"><i class="fas fa-credit-card me-2"></i>ÈÅ∏Êìá‰ªòÊ¨æÊñπÂºè</h5>
                        </div>
                        <div class="card-body">
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label class="payment-option selected w-100">
                                        <input type="radio" name="paymentMethod" value="credit" checked>
                                        <div class="d-flex align-items-center">
                                            <i class="fas fa-credit-card fa-2x text-primary me-3"></i>
                                            <div>
                                                <div class="fw-bold">‰ø°Áî®Âç°</div>
                                                <small class="text-muted">Visa / Mastercard / JCB</small>
                                            </div>
                                        </div>
                                    </label>
                                </div>
                                <!-- <div class="col-md-6">
                                    <label class="payment-option w-100">
                                        <input type="radio" name="paymentMethod" value="atm">
                                        <div class="d-flex align-items-center">
                                            <i class="fas fa-university fa-2x text-info me-3"></i>
                                            <div>
                                                <div class="fw-bold">ATM ËΩâÂ∏≥</div>
                                                <small class="text-muted">ÈúÄÊñº 24 Â∞èÊôÇÂÖßÂÆåÊàê</small>
                                            </div>
                                        </div>
                                    </label>
                                </div> -->
                                <div class="col-md-6">
                                    <label class="payment-option w-100">
                                        <input type="radio" name="paymentMethod" value="linepay">
                                        <div class="d-flex align-items-center">
                                            <i class="fab fa-line fa-2x text-success me-3"></i>
                                            <div>
                                                <div class="fw-bold">LINE Pay</div>
                                                <small class="text-muted">Âø´ÈÄüÂÆâÂÖ®‰ªòÊ¨æ</small>
                                            </div>
                                        </div>
                                    </label>
                                </div>
                                <!-- <div class="col-md-6">
                                    <label class="payment-option w-100">
                                        <input type="radio" name="paymentMethod" value="cvs">
                                        <div class="d-flex align-items-center">
                                            <i class="fas fa-store fa-2x text-warning me-3"></i>
                                            <div>
                                                <div class="fw-bold">Ë∂ÖÂïÜ‰ª£Á¢º</div>
                                                <small class="text-muted">7-11 / ÂÖ®ÂÆ∂ / ËêäÁàæÂØå</small>
                                            </div>
                                        </div>
                                    </label>
                                </div> -->
                            </div>
                        </div>
                    </div>

                    <!-- Credit Card Form -->
                    <div class="card bg-dark border-secondary mb-4" id="creditCardForm">
                        <div class="card-header bg-transparent border-secondary">
                            <h5 class="mb-0"><i class="fas fa-lock me-2"></i>‰ø°Áî®Âç°Ë≥áË®ä</h5>
                        </div>
                        <div class="card-body">
                            <div class="row g-3">
                                <div class="col-12">
                                    <label class="form-label">Âç°Ëôü</label>
                                    <input type="text" class="form-control bg-dark text-white border-secondary" placeholder="1234 5678 9012 3456" maxlength="19">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">ÊúâÊïàÊúüÈôê</label>
                                    <input type="text" class="form-control bg-dark text-white border-secondary" placeholder="MM/YY" maxlength="5">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">ÂÆâÂÖ®Á¢º (CVV)</label>
                                    <input type="text" class="form-control bg-dark text-white border-secondary" placeholder="123" maxlength="4">
                                </div>
                                <div class="col-12">
                                    <label class="form-label">ÊåÅÂç°‰∫∫ÂßìÂêç</label>
                                    <input type="text" class="form-control bg-dark text-white border-secondary" placeholder="ËàáÂç°Áâá‰∏äÁõ∏Âêå">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Token Discount -->
                    <div class="card bg-dark border-secondary mb-4">
                        <div class="card-body">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="useTokensCheckout">
                                <label class="form-check-label" for="useTokensCheckout">
                                    ‰ΩøÁî® Momento ‰ª£Âπ£ÊäòÊäµ
                                    <span class="badge bg-success ms-2">ÂèØÁî®È§òÈ°ç: 
                                        <label class = "token" id="tokenAmount" th:text="${session.loginMember.token}"></label>                                            
                                    </span>
                                </label>
                            </div>
                            <!--<div class="mt-2 d-none" id="tokenSlider">
                                <input type="range" class="form-range" min="0" max="1250" step="50" value="0" id="tokenAmount">
                                <div class="d-flex justify-content-between text-muted small">
                                    <span>0</span>
                                    <span id="tokenAmountDisplay">‰ΩøÁî® 0 ‰ª£Âπ£</span>
                                    <span>1,250</span>
                                </div>
                            </div>-->
                        </div>
                    </div>

                    <!-- Token Reward Notice -->
                    <div class="alert alert-success bg-success bg-opacity-10 border-success mb-4" id="tokenRewardNotice">
                        <div class="d-flex align-items-center">
                            <div class="me-3">
                                <i class="fas fa-coins fa-2x text-success"></i>
                            </div>
                            <div>
                                <h6 class="mb-1 text-success">
                                    <i class="fas fa-gift me-1"></i>Ê∂àË≤ªÂõûÈ•ã
                                </h6>
                                <p class="mb-0 small">
                                    ÂñÆÁ≠ÜÊ∂àË≤ªÊªø <strong>NT$ 300</strong> Âç≥Ë¥à <strong class="text-success">5 ÂÖÉ‰ª£Âπ£</strong>ÔºÅ
                                    <span id="tokenRewardMsg" class="ms-2">
                                        Ê≠§Á≠ÜË®ÇÂñÆÂ∞áÁç≤Âæó <span class="badge bg-success"><span class="momentoCoins">54</span> ‰ª£Âπ£</span> ÂõûÈ•ã
                                    </span>
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="d-flex justify-content-between">
                        <button type="button" class="btn btn-outline-secondary btn-prev" data-prev="2">
                            <i class="fas fa-arrow-left me-2"></i>‰∏ä‰∏ÄÊ≠•
                        </button>
                        <button type="button" class="btn btn-primary btn-lg" id="btnSubmitOrder">
                            <i class="fas fa-lock me-2"></i>Á¢∫Ë™ç‰ªòÊ¨æ NT$ 3,250
                        </button>
                    </div>
                </div>

                <!-- Step 4: Success -->
                <div class="step-content" id="step4">
                    <div class="card bg-dark border-secondary text-center py-5">
                        <div class="card-body">
                            <div class="success-animation mb-4">
                                <i class="fas fa-check-circle fa-5x text-success"></i>
                            </div>
                            <h2 class="mb-3">Ë®ÇÂñÆÂÆåÊàêÔºÅ</h2>
                            <p class="text-muted mb-4">ÊÑüË¨ùÊÇ®ÁöÑË≥ºË≤∑ÔºåË®ÇÂñÆÁ¢∫Ë™ç‰ø°Â∑≤ÂØÑÈÄÅËá≥ÊÇ®ÁöÑ‰ø°ÁÆ±</p>
                            
                            <div class="bg-black rounded p-4 mb-4 d-inline-block">
                                <div class="text-muted small mb-1">Ë®ÇÂñÆÁ∑®Ëôü</div>
                                <div class="h4 text-success mb-0" id="orderNumber">MO-20241226-001234</div>
                            </div>

                            <div class="row justify-content-center g-3 mb-4">
                                <!--
                                <div class="col-auto">
                                    <div class="text-muted small">Á•®Âà∏</div>
                                    <div class="fw-bold">1 Âºµ</div>
                                </div>
                                -->
                                <div class="col-auto">
                                    <div class="text-muted small">ÂïÜÂìÅ</div>
                                    <div class="fw-bold" id="finalCouhnt">1 ‰ª∂</div>
                                </div>
                                <div class="col-auto">
                                    <div class="text-muted small">‰ªòÊ¨æÈáëÈ°ç</div>
                                    <div class="fw-bold text-success" id="finalPrice">NT$ 3,250</div>
                                </div>
                            </div>

                            <!-- Token Reward Earned -->
                            <div class="alert alert-success bg-success bg-opacity-10 border-success mb-4">
                                <div class="d-flex align-items-center justify-content-center">
                                    <i class="fas fa-coins fa-2x text-success me-3"></i>
                                    <div>
                                        <h6 class="mb-0 text-success">
                                            üéâ ÊÅ≠ÂñúÁç≤Âæó <strong>5 ‰ª£Âπ£</strong> ÂõûÈ•ãÔºÅ
                                        </h6>
                                        <small class="text-muted">‰ª£Âπ£Â∑≤Ëá™ÂãïÂ≠òÂÖ•ÊÇ®ÁöÑÈå¢ÂåÖÔºåÂèØÊñº‰∏ãÊ¨°Ê∂àË≤ªÊäòÊäµ‰ΩøÁî®</small>
                                    </div>
                                </div>
                            </div>

                            <div class="alert alert-info bg-info bg-opacity-10 border-info mb-4">
                                <i class="fas fa-info-circle me-2"></i>
                                ÈõªÂ≠êÁ•®Âà∏Â∞áÊñºÊ¥ªÂãïÂâç 3 Â§©ÈñãÊîæ‰∏ãËºâÔºåÂ±äÊôÇÊúÉ‰ª• Email ÈÄöÁü•ÊÇ®
                            </div>

                            <div class="d-flex justify-content-center gap-3">
                                <a href="dashboard.html#orders" class="btn btn-primary">
                                    <i class="fas fa-list me-2"></i>Êü•ÁúãË®ÇÂñÆ
                                </a>
                                <a href="/" class="btn btn-outline-secondary">
                                    <i class="fas fa-home me-2"></i>ÂõûÈ¶ñÈ†Å
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Order Summary Sidebar -->
            <div class="col-lg-4">
                <div class="card bg-dark border-secondary sticky-top" style="top: 100px;">
                    <div class="card-header bg-transparent border-secondary">
                        <h5 class="mb-0">Ë®ÇÂñÆÊëòË¶Å</h5>
                    </div>
                    <div class="card-body">
                        <!--<div class="d-flex justify-content-between mb-2">
                            <span class="text-muted">Á•®Âà∏Â∞èË®à (1)</span>
                            <span>NT$ 2,800</span>
                        </div>-->
                        <div class="d-flex justify-content-between mb-2">
                            <span class="text-muted">ÂïÜÂìÅÂ∞èË®à</span>
                            <span class="prod_price_T">NT$ 450</span>
                        </div>
                        <!--<div class="d-flex justify-content-between mb-2">
                            <span class="text-muted">ÊúçÂãôË≤ª</span>
                            <span>NT$ 0</span>
                        </div>-->
                        <div class="d-flex justify-content-between mb-2">
                            <span class="text-muted">ÈÅãË≤ª</span>
                            <span class="text-success">ÂÖçÈÅãË≤ª</span>
                        </div>
                        <div class="d-flex justify-content-between mb-2 d-none" id="tokenDiscountRow">
                            <span class="text-muted">‰ª£Âπ£ÊäòÊäµ</span>
                            <span class="text-danger" id="tokenDiscountAmount">-NT$ 0</span>
                        </div>
                        <hr class="border-secondary">
                        <div class="d-flex justify-content-between">
                            <span class="fw-bold text-secondary">Êáâ‰ªòÁ∏ΩÈ°ç</span>
                            <span class="fw-bold text-success fs-4" id="finalTotal">NT$ 3,250</span>
                        </div>
                        <div class="text-end">
                            <small class="text-success">
                                <i class="fas fa-coins me-1"></i>ÂèØÁç≤Âæó <span class="momentoCoins">54</span> Momento ‰ª£Âπ£
                            </small>
                        </div>
                    </div>
                    <div class="card-footer bg-transparent border-secondary">
                        <div class="d-flex align-items-center text-muted small">
                            <i class="fas fa-shield-alt me-2"></i>
                            SSL ÂÆâÂÖ®Âä†ÂØÜÔºå‰øùË≠∑ÊÇ®ÁöÑ‰∫§ÊòìË≥áË®ä
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="/js/common.js"></script>
    <script src="/js/common/checkout.js"></script>
</body>

</html>

