<div class="content-panel" id="panel-product-approval">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2><i class="fas fa-box-open me-2"></i>商品審核</h2>
        <div class="d-flex gap-2">
            <select class="form-select bg-dark text-white border-secondary" style="width: 150px;">
                <option class="prodSort" sortid="all">所有類別</option>
                <option class="prodSort" th:each="prodSort:${prodSortList}" th:text="${prodSort.sortName}">藝術服飾</option>
            </select>
            <form method="post" th:action="@{searchProds}">
                <input type="text" class="form-control bg-dark text-white border-secondary" placeholder="搜尋商品名稱..."
                style="width: 200px;" name="prodNameLike">
        	</form>
        </div>

    </div>

    <div class="card bg-dark border-secondary">
        <div class="card-header border-secondary">
            <ul class="nav nav-tabs card-header-tabs" id="productReviewTabs">
                <li class="nav-item">
                    <a class="nav-link active text-white" href="#" data-status="all">
                        全部商品 <span class="badge bg-info ms-1">4</span>
                    </a>
                </li>
                <li class="nav-item text-muted">
                    <a class="nav-link" href="#" data-status="待審核">
                        待審核 <span class="badge bg-warning ms-1">4</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-muted" href="#" data-status="未通過">
                        已駁回 <span class="badge bg-danger ms-1">2</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-muted" href="#" data-status="通過">
                        已通過 <span class="badge bg-success ms-1">12</span>
                    </a>
                </li>
            </ul>
        </div>
        <div class="card-body p-0">
            <div class="table-responsive">
                <table class="table table-dark table-hover mb-0">
                    <thead>
                        <tr>
                            <th width="80">圖片</th>
                            <th>商品名稱</th>
                            <th>主辦方</th>
                            <th>類別</th>
                            <th>售價</th>
                            <th>申請日期</th>
                            <th>狀態</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr  class="prodContent show" th:each="prod : ${prodList}" th:attr="data-sort=${prod.sortName}, data-status=${prod.reviewStatus}">
                            <td>
                                <img loading="lazy" th:src="${prod.mainImageUrl}" class="rounded"
                                    alt="商品圖片">
                            </td>
                            <td>
                                <div class="fw-bold" th:text="${prod.prodName}"></div>
                                <small class="text-muted" th:text="|ID: ${prod.prodId}|"></small>
                            </td>
                            <td th:text="${prod.organizerName}">藝響樂團文化基金會</td>
                            <td><span class="badge bg-secondary" th:text="${prod.sortName}">收藏藝品</span></td>
                            <td th:text="|NT$ ${prod.prodPrice}|">NT$ 3,200</td>
                            <td th:text="${prod.createdAt}">2024/12/26</td>
                            <td><span class="badge bg-warning text-dark" th:text="${prod.reviewStatus}">待審核</span></td>
                            <td>
                                <div class="btn-group btn-group-sm">
                                    <button class="btn btn-outline-info btn-review-product" title="查看詳情" th:attr="data-id=${prod.prodId}">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <form th:action="@{/admin/changeReviewStatus}" method="post">
	                                    <input type="hidden" name="prodId" th:value="${prod.prodId}" />
	                                    <button style="padding:6px 6px 6px 6px" class="btn btn-outline-success" type="submit" title="通過" name="reviewStatus" value="1">
	                                        <i class="fas fa-check"></i>
	                                    </button>
										<button style="padding:6px 7px 6px 7px" class="btn btn-outline-danger"  type="submit" title="駁回" name="reviewStatus" value="2">
	                                        <i class="fas fa-times"></i>
	                                    </button>
									</form>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
<!--         <div class="card-footer border-secondary"> -->
<!--             <nav> -->
<!--                 <ul class="pagination pagination-sm mb-0 justify-content-end"> -->
<!--                     <li class="page-item disabled"><a class="page-link" href="#">上一頁</a></li> -->
<!--                     <li class="page-item active"><a class="page-link" href="#">1</a></li> -->
<!--                     <li class="page-item"><a class="page-link" href="#">2</a></li> -->
<!--                     <li class="page-item"><a class="page-link" href="#">下一頁</a></li> -->
<!--                 </ul> -->
<!--             </nav> -->
<!--         </div> -->
    </div>
<!-- 商品詳細頁面modal -->
	<div class="modal fade" id="productReviewModal" tabindex="-1">
		<div class="modal-dialog modal-lg modal-dialog-centered">
	        <div class="modal-content bg-dark text-white">
	            <div class="modal-header border-secondary">
	                <h5 class="modal-title"><i class="fas fa-box-open me-2"></i>商品審核詳情</h5>
	                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
	            </div>
	            <div class="modal-body">
	                <div class="row">
	                    <div class="col-md-5">
	                        <img loading="lazy" src="https://picsum.photos/seed/prod1/400/400"
	                            class="img-fluid rounded mb-3" id="reviewProductImage" style="width: 280px; height: 280px">
	                        <div class="d-flex gap-2" id="prodImages">
<!-- 	                            <img loading="lazy" src="https://picsum.photos/seed/prod1a/80/80" class="rounded" -->
<!-- 	                                style="width: 60px; height: 60px; object-fit: cover;"> -->
	                        </div>
	                    </div>
	                    <div class="col-md-7">
	                        <h4 id="reviewProductName">10週年紀念黑膠套裝</h4>
	                        <p class="text-muted mb-3">
	                            <i class="fas fa-building me-1"></i>
	                            <span id="reviewProductOrg">藝響樂團文化基金會</span>
	                        </p>
	                        <div class="row mb-3">
	                            <div class="col-6">
	                                <small class="text-muted">類別</small>
	                                <p class="mb-0"><span class="badge bg-secondary" id="reviewProductSort">收藏藝品</span>
	                                </p>
	                            </div>
	                            <div class="col-6">
	                                <small class="text-muted">售價</small>
	                                <p class="mb-0 text-success fw-bold" id="reviewProductPrice">NT$ 3,200</p>
	                            </div>
	                        </div>
	                        <div class="row mb-3">
	                            <div class="col-6">
	                                <small class="text-muted">庫存數量</small>
	                                <p class="mb-0" id="reviewProductStock">100</p>
	                            </div>
	                            <div class="col-6">
	                                <small class="text-muted">申請日期</small>
	                                <p class="mb-0" id="reviewProductDate">2024/12/26</p>
	                            </div>
	                        </div>
	                        <div class="mb-3">
	                            <small class="text-muted">商品描述</small>
	                            <p class="mb-0" id="reviewProductDesc">限量500套，收錄十年精選錄音，含典藏木盒與紀念冊。每套皆有獨立編號，附贈限量明信片組。</p>
	                        </div>
	                    </div>
	                </div>
	                <hr class="border-secondary">
	                <div class="mb-3">
	                    <label class="form-label">審核意見</label>
	                    <textarea class="form-control bg-dark text-white border-secondary" rows="3"
	                        id="reviewProductComment" placeholder="輸入審核意見（駁回時必填）..."></textarea>
	                </div>
	            </div>
	            <div class="modal-footer border-secondary">
	                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal" style="border:1px solid white">取消</button>
					<form  th:action="@{/admin/changeReviewStatus}" method="post">
						<input id="reviewBtn" type="hidden" name="prodId"value=""/>
						<button type="submit" class="btn btn-danger" name="reviewStatus" value="2">
		                    <i class="fas fa-times me-1"></i>駁回
		                </button>
						<button type="submit" class="btn btn-success" name="reviewStatus" value="1">
		                    <i class="fas fa-check me-1"></i>通過審核
		                </button>
					</form>
	            </div>
	        </div>
	    </div>
	</div>
</div>